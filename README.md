# mq
利用channel实现的一个基于内存的消息队列

思路：
难点在于 channel 里面的元素只能被一个 goroutine 取出来。所以要想同一个消息能够被多 goroutine 消费，就需要费一点手脚！

1、我采用的方案是每一个消费者订阅的时候，创建一个子channel

2、发送消息增加了超时控制，而不是阻塞生产者，我觉得这种方式更加优雅

3、缓存的容量作为中间件设计者是无法预估的，所以由用户传入

4、关闭消息队列时，消费者会消费完剩余消息

